---
- hosts: localhost

  # tell ansible to not use ssh
  connection: local
  

  # Tasks to perform first
  # tasks to complete before running roles
  pre_tasks:
    
    # update cache for arch linux
    - name: pre-run | update package cache (arch)
      # use root profile to perform tasks
      become: true
      # In case of running specific tasks
      tags: 
        - install
        - core
      pacman: update_cache=yes
      changed_when: False
      when: ansible_distribution == "Archlinux"
    
    # update cache for Debian and derivatives....
    # For getting system info with ansible,
    # $ ansible localhost -m gather_facts
    - name: pre-run | update package cache (Debian, Pop, Ubuntu,...)
      become: true
      tags: 
        - install
        - core
      apt: update_cache=yes
      changed_when: False
      when: ansible_distribution in ["Pop!_OS", "Ubuntu", "Debian"]

  tasks:
    - name: "include_tasks => ansible setup"
      include_tasks: tasks/ansible.yml
      tags: ansible

    - name: "include_tasks => core setup"
      include_tasks: tasks/core-setup.yml
      tags: core

    - name: "include_tasks => zsh"
      include_tasks: tasks/zsh-setup.yml
      tags: zsh

    - name: "include_tasks => prompt setup"
      include_tasks: tasks/prompt-setup.yml
      tags: prompt

    - name: "include_tasks => kitty terminal"
      include_tasks: tasks/kitty.yml
      tags: kitty

    - name: "include_tasks => dotfiles"
      include_tasks: tasks/dotfiles-setup.yml
      tags: dotfiles

    - name: "include_tasks => brave"
      include_tasks: tasks/brave.yml
      tags: 
        - install
        - brave

    - name: "include_tasks => desktop"
      include_tasks: tasks/desktop-setup.yml
      tags: desktop
...          
